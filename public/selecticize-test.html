<html>
	<head>
       	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
        <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
        <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
        <link href="css/selectize.bootstrap3.css" type="text/css" rel="stylesheet">
        <link href="css/stylesheet.css" type="text/css" rel="stylesheet">
    </head>

    <body style="padding: 50px 100px">
    	<h1>Selectize.js Test</h1>
        
        <div class="wrap">
            
            <select id="mySelect" placeholder="empty" ></select>
        </div>
        <br><br><br>
        <button id="btn" class="btn btn-primary">Go</button>
        <br><br>

        <div id="ratingsForm" class="form-wrap col-md-6">
            <div class="form-container">
                <form id="courseForm" class="col-md-11 col-md-offset-1 form-horizontal">
                    <fieldset>
                        <legend>Submit a course</legend>
                        <div>
                            <div id="courseInputWrap" class="form-group">
                                <label for="txtCourse" class="control-label col-sm-3">Course name:</label>
                                <div class="col-sm-8">
                                    <input type="text" id="txtCourse" class="form-control" placeholder="Enter course ID (i.e. ENGL101)">
                                    <p class="help-block" id="courseErrorMsg">Enter a valid course.</p>
                                </div>
                            </div>
                            <div id="profInputWrap" class="form-group">
                                <label for="txtProf" class="control-label col-sm-3">Professor:</label>
                                <div class="col-sm-8 txtProf-wrap">
                                    <select id="txtProf" placeholder="Enter the professor's name">
                                    </select>
                                    <p class="help-block" id="profErrorMsg">Enter professor's name.</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="rtgDifficulty" class="control-label col-sm-3">Difficulty:</label>
                                <div class="col-sm-8">
                                    <input type="hidden" class="rating" id="rtgDifficulty" value="1">
                                    <p class="help-block">1 star = Very Easy, 5 stars = Very Difficult</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="rtgInterest" class="control-label col-sm-3">Interest:</label>
                                <div class="col-sm-8">
                                    <input type="hidden" class="rating" id="rtgInterest" value="1">
                                    <p class="help-block">1 star = Very Boring, 5 stars = Very Interesting</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-3 col-sm-offset-3">   
                                    <button type="button" class="btn btn-primary" id="btnSubmitCourse">Submit</button>
                                </div>
                                <div class="col-sm-6">
                                    <p id="courseSuccessMsg" class="success-msg">Course succsesfully submitted.</p>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>

        <script src="scripts/jquery.min.js"></script>
        <script src="scripts/jquery-ui.min.js"></script>
        <script src="scripts/bootstrap.min.js"></script>
        <script src="scripts/bootstrap-rating.min.js"></script>
        <script src="scripts/info.js"></script>
        <script src="scripts/ratings-form.js"></script>
        <script src="scripts/selectize.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.6.3/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyAMR4YSAmaxptjscXsoOd33Y3jBHnVUNdw",
                authDomain: "umd-api-testing.firebaseapp.com",
                databaseURL: "https://umd-api-testing.firebaseio.com",
                storageBucket: "umd-api-testing.appspot.com",
                messagingSenderId: "379483876030"
            };
            firebase.initializeApp(config);
        </script>
        <script>
            var select = 
            $('#mySelect').selectize({
                valueField: 'value',
                labelField: 'name',
                searchField: 'name',
                sortField: 'name',
                selectOnTab: true,
                closeAfterSelect: true,
                loadThrottle: 150,
                persist: false,
                create: function(input) {
                    return { name: input, value: 'Other'}
                },
                render: {
                    option: function(item, escape) {
                        return '<div>' +
                            '<span class="title">' +
                                '<span>' + escape(item.name) + '</span>' +
                            '</span>'
                        '</div>';
                    }
                },
                load: function(query, callback) {
                    if (!query.length) return callback();
                    $.ajax({
                        url: API_FIND_PROFS + '/'+encodeURIComponent(query),
                        type: 'GET',
                        error: function() {
                            callback();
                        },
                        success: function(res) {
                            for (var i = 0; i < res.length; i++) {
                                res[i]['value'] = res[i].name;
                            }
                            callback(res);
                            //callback(res.repositories.slice(0, 10));
                        }
                    });
                }
            });

    

            $('#btn').click(function() {
                console.log($('#mySelect').val());
                $('#mySelect')[0].selectize.clear();

            })

            window.onload = function() {
                window.ratingsForm = new RatingsForm();
            }
        </script>
    </body>
</html>
